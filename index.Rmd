---
title: "Portfolio Computational Musicology"
author: "Marijn Biekart"
date: "February 2021"
output: html_document
---

## Description of the corpus
The corpus that I use for my portfolio will consist of 100 opera songs and 100 musical songs, collected from pre-existing playlists that are available on Spotify. I use Spotify's *Opera 100: Spotify Picks* playlist as a basis for my opera playlist. This playlist consists of 97 tracks, so I have added 3 tracks manually, based on Spotify's suggestions. For my musical playlist, I use a public playlist called *BROADWAY MUSICALS*, made by Hugo Torres. Out of all musical playlists I could find, I found this to be the most inclusive. Furthermore, I chose to focus on Broadway musicals because they were written to be performed in front of a live audience, just like operas. The original playlist consists of 150 songs, so I manually removed 50 tracks. I chose to remove tracks from musicals which had more tracks in the playlist, in order to create a playlist with as much different musicials as possible. \
I chose this corpus because I have always been fascinated by musicals. More recently, I was introduced to operas and I recognized the same compelling drama I appreciate in musicals. Opera songs and musical songs both mainly serve to tell a story, but have very different styles. I wonder if opera and musical music share certain aspects, because they both have such a strong narrative function.

## Natural comparison points
In comparing opera tracks with musical tracks, I expect to find a difference in tempo and danceability. Furthermore, I wonder if opera songs are sadder than musical songs, which might be reflected in the valence. I am curious to find out if the energy and loudness differ between the groups. I expect the liveness, intrumentalness, and speechiness to be similar, because most songs in the corpus are studio recordings and contain vocals. 

## Weaknesses of the corpus
Because adding music from *every* opera and musical would create a very big corpus, tracks from some operas and musicals are essentially missing (also because most operas and musicals have had a lot of productions with different artists/conductors/musicians). This means that my corpus does not cover the whole genre. Furthermore, Spotify's pre-existing playlists generally include only the well-known (classical) operas and musicals, leaving out smaller productions.

## Typical tracks
  * Habanera – Carmen: for me, this is a typical opera song with very high notes that everyone knows.
  * La donne e mobile – Rigoletto: again, this is a very famous song. I think the grandeur of this song is typical for opera music.
  * One Day More - Les Miserables: this song is very dramatic and has multiple singers, which is typical for musical songs.
  * You Can't Stop The Beat - Hairspray: the happiness and danceability of this song is typical for musical songs.

## Atypical tracks
  * Summertime - Porgy and Bess: this is a jazzy song, which is a different genre than most opera songs.
  * Ride of the Valkyries - Die Walkure: this song has no lyrics, which is atypical for an opera song.
  * Totally Fucked - Spring Awakening: this comes close to a rock song, which is a different genre than most musical songs. 
  * Land of Lola - Kinky Boots: this song has a strong disco vibe, with more use of electronic instruments than the average musical song.

## Downloading the corpus
```{r}
# Load necessary packages
library(tidyverse)
library(spotifyr)
```
```{r}
# Load playlists 
opera_playlist <- get_playlist_audio_features("", "1rM8PQnCL3unpZENj2xdFa")
musical_playlist <- get_playlist_audio_features("", "7A2ifENYPFKuxloYPlYWtZ")

# Combine playlist into one corpus
corpus <-
  bind_rows(
    opera_playlist %>% mutate(category = "Opera Tracks"),
    musical_playlist %>% mutate(category = "Musical Tracks")
  )
```

## Data visualisation
```{r}
ggplot(corpus, aes(energy, valence, size = danceability, color = tempo)) +
  geom_jitter(alpha = 0.3) +
  facet_wrap(~category) +
  theme_minimal() +
  labs(title = "Valence vs Energy for Musical and Opera Tracks",
       x = "Energy",
       y = "Valence",
       size = "Danceability",
       color = "Tempo") +
  scale_x_continuous(limits = c(-0.1, 1),
                     breaks = c(0, 0.25, 0.5, 0.75, 1),
                     minor_breaks = NULL) +
  scale_y_continuous(limits = c(0, 1),
                     breaks = c(0, 0.25, 0.5, 0.75, 1),
                     minor_breaks = NULL) +
  geom_rug(size = 0.1) +
  geom_text(aes(x = energy, y = valence, label = label),
            data = tibble(label = c("Memory", "Stizzoso, mio stizzoso, voi fate il borioso"),
                          category = c("Musical Tracks", "Opera Tracks"),
                          energy = c(0.00803, 0.04950),
                          valence = c(0.1220, 0.6450),
                          danceability = c(0.261, 0.6440),
                          tempo = c(74.153, 116.443)),
            size = 3,
            hjust = "left",
            vjust = "bottom",
            nudge_x = -0.05,
            nudge_y = 0.04)
```
\
I started by visualizing the distribution of valence against energy for both musical and opera tracks. Furthermore, this plot shows the danceability and tempo of the songs in my corpus. As I expected, musical tracks cover a wider range of valence and energy than opera tracks. I think this might be because musicals can be written in a variety of different styles/genres, whereas operas often have the same style. \
I was surprised by the fact that the graph shows so little difference between opera tracks, I would've expected at least a little more variety. \
Furthermore, as expected, musical songs are generally more danceable than opera songs. It is interesting that musical tracks seem to have a linear relationship: the more energy a track has, the higher the valence. This would mean that there are not many relaxed or angry musical songs. \
I highlighted one outlier in both groups. Memory (from the musical Cats) is a particular sad musical song, while Stizzoso, mio stizzoso, voi fate il borioso (from the opera La Serva Padrona) is a particular happy opera song (and also turns out the be the most danceable opera song). \
Because the opera songs are not distributed in an even way, it is hard to see the data. That's why I decided to take a closer look. 
\

```{r}
ggplot(opera_playlist, aes(energy, valence, color = tempo, size = danceability)) +
  geom_jitter(alpha = 0.3) +
  theme_minimal() +
  scale_x_continuous(limits = c(0, 0.7),
                     breaks = c(0, 0.25, 0.5, 0.7),
                     minor_breaks = NULL) +
  scale_y_continuous(limits = c(0, 0.7),
                     breaks = c(0, 0.25, 0.5, 0.7),
                     minor_breaks = NULL) +
  geom_rug(size = 0.1) +
  labs(title = "Valence vs Energy for Opera Tracks",
       x = "Energy",
       y = "Valence",
       color = "Tempo",
       size = "Danceability") +
  geom_text(aes(x = energy, y = valence, label = label),
            data = tibble(label = c("Et maintenant je dois offrir "),
                          energy = c(0.58200),
                          valence = c(0.2310),
                          danceability = c(0.2890),
                          tempo = c(96.930)),
            size = 3,
            hjust = "left",
            vjust = "bottom",
            nudge_x = -0.12,
            nudge_y = 0.04)
```
\
In this plot, another outlier stands out: Et maintenant je dois offrir (from the opera Les Huguenots) has the highest energy of all opera songs in the corpus. I manually chose different x and y limits for this plot, so the datapoints are somewhat clearer now. However, they are still very much clustered together in the low-Energy-low-Valence corner. \
The tempo and danceability features are quite hard to read from these graphs, so I made seperate histograms for each features to get more insight into the two groups. 
\
```{r}
ggplot(corpus, aes(energy, fill = category)) +
  geom_histogram(position = "dodge", binwidth = 0.1) +
  theme_minimal() +
  labs(title = "Energy of Muscial and Opera Tracks",
       x = "Energy",
       y = "Count")
```
\
Almost all opera songs have an energy value between 0 and 0.25. However, musical songs are much more distributed and generally have more energy. \

```{r}
ggplot(corpus, aes(valence, fill = category)) +
  geom_histogram(position = "dodge", binwidth = 0.1) +
  theme_minimal() +
  labs(title = "Valence of Musical and Opera Tracks",
       x = "Valence",
       y = "Count")
```
\
It is quite surprising to me that so many opera songs have such a low valence value. This suggests that almost all opera songs in my corpus are sad. Furthermore, I expected musical songs to be even happier, i.e., to have more songs in the corpus with valence values between 0.75 and 1. \

```{r}
ggplot(corpus, aes(danceability, fill = category)) +
  geom_histogram(position = "dodge", binwidth = 0.25) +
  theme_minimal() +
  labs(title = "Danceability of Musical and Opera Tracks",
       x = "Danceability",
       y = "Count")
```
\
As expected, musical songs are more danceable than opera songs. However, I expected to find more musical songs with danceability values between 0.75 and 1.
\
```{r}
ggplot(corpus, aes(tempo, fill = category)) +
  geom_histogram(position = "dodge", binwidth = 50) +
  theme_minimal() +
  labs(title = "Tempo of Musical and Opera Tracks",
       x = "Tempo (BPM)",
       y = "Count")
```
\
Out of all features I measured, opera and musical tracks are most similar in tempo. This is surprising to me, because I would've thought musical songs have much higher tempo than opera songs.
\